<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      
      <div class="card border-danger shadow">
        <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
          <h4 class="mb-0">Gestión de Cancelaciones</h4>
          <span class="badge bg-light text-danger">Método: PATCH</span>
        </div>
        
        <div class="card-body">
          <p class="text-muted">Ingresa las llaves de la transacción para solicitar la anulación en el sistema persistente.</p>
          
          <div class="row g-3">
            <div class="col-md-5">
              <label class="form-label">ID de Transacción</label>
              <input type="text" [(ngModel)]="transactionId" class="form-control" placeholder="Ej: 1">
            </div>
            <div class="col-md-5">
              <label class="form-label">Número de Referencia</label>
              <input type="text" [(ngModel)]="reference" class="form-control" placeholder="Ej: 601499">
            </div>
            <div class="col-md-2 d-flex align-items-end">
              <button (click)="onCancel()" [disabled]="loading" class="btn btn-danger w-100">
                {{ loading ? '...' : 'Anular' }}
              </button>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="resultado" class="card mt-4 animate__animated animate__fadeIn">
        <div class="card-body bg-light">
          <h5 class="card-title text-secondary border-bottom pb-2">Estado Final en Base de Datos</h5>
          <div class="row text-center mt-3">
            <div class="col-4">
              <small class="d-block text-muted">Operación</small>
              <span class="fw-bold">{{ resultado.operacion | uppercase }}</span>
            </div>
            <div class="col-4">
              <small class="d-block text-muted">ID Sistema</small>
              <span class="fw-bold">#{{ resultado.id }}</span>
            </div>
            <div class="col-4">
              <small class="d-block text-muted">Nuevo Estatus</small>
              <span class="badge bg-danger fs-6">{{ resultado.estatus }}</span>
            </div>
          </div>
          <div class="mt-3 text-end">
            <button (click)="limpiar()" class="btn btn-sm btn-link">Nueva consulta</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>